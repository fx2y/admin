clear
cd ~/workspace-demo/go-demo-app-ops/cicd/tekton
k apply -f pvc.yaml -f sa.yaml
@_ECHO_ON

k api-resources --api-group='tekton.dev'
kns tekton-pipelines

yqc build-pipeline.yaml

# Go to https://github.com/tektoncd/catalog

tkn task list

# Observe parameters and placeholders in the Tasks on GitHub

k apply -f build-pipeline.yaml

yqc build-pipeline-run.yaml
k apply -f build-pipeline-run.yaml

tkn pipelineruns list
tkn pr describe build-pipeline-run

# Automate triggering

yqc build-event-listener.yaml
yqc build-trigger-template.yaml
yqc build-trigger-binding.yaml

rm build-pipeline-run.yaml

k apply -f .

. ~/create_github_webhook.sh > /dev/null

cd ~/worspace-demo/go-demo-app

sed -i '' 's/world/pipeline/g' hello-server.go
git commit -am "Hello pipeline"
git push

tkn pipelinerun list
tkn pr logs -f
