@_SKIP # PREP
@_SKIP # brew install tektoncd-cli
source ~/.aliases
clear

@_ECHO_ON
jx edit pipelineusername

@_SKIP # DEMO
k get deploy
jx ui -p 8080 2>&1 > /dev/null &
JX_PID=$!
jx get env
jx create quickstart
@_SKIP # Open repository in GitHub.com
@_SKIP # Take a look at the main.go file
@_SKIP # Explain quickstart:
@_SKIP # - Language detection => Dockerfile creation
@_SKIP # - jenkins-x.yaml file creation
@_SKIP # - Helm charts added
jx get activity -f jenkinsx-s1t-2020 -w
tkn pr list
jx get build logs
@_SKIP # Select jenkinsx-s1t-2020/master #1, go through log steps
@_SKIP # Open GitHub again, check out release 0.0.1
@_SKIP # Back in logs, click on PR for staging repository
jx get build logs
@_SKIP # Select staging/master #1, go through log steps
cd jenkinsx-s1t-2020
g checkout -b s1t
idea .
@_SKIP # Change title in main.go
@_SKIP # Open jenkins-x.yml and point out buildpacks
@_SKIP # https://github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/tree/master/packs
@_SKIP # Add pipelineConfig.pipelines.pullRequest.preBuild.steps[0].container: busybox|command: echo|args[0]."s1t 2020"
g commit -am "s1t improvement"
g push origin s1t
@_SKIP # Open GitHub again, create PR for s1t branch
jx get applications
@_SKIP # Open staging for the app
jx get build logs
@_SKIP # Select jenkinsx-s1t-2020/pr-1 #1
@_SKIP # Once finished, open GitHub again, take another look at the PR
jx promote jenkinsx-s1t-2020 --version 0.0.2 --env production
